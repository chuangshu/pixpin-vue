import{_ as S,o as C,c as r,b as o,e as D,F as X,r as z,f as N,g as h,h as c,n as R,w as f}from"./index-BQcgjDF-.js";const B={class:"pinboard"},Y={class:"toolbar"},F={class:"upload-btn"},O=["onMousedown"],V=["src","alt"],q=["onClick"],A=["onMousedown"],J={key:0,class:"empty"},U={__name:"PinBoard",setup($){const s=h([]),y=h(null);let l=null,d=null,u={x:0,y:0},m={x:0};const _=()=>{try{s.value=JSON.parse(localStorage.getItem("pixpin-pins")||"[]")}catch{s.value=[]}},i=()=>{localStorage.setItem("pixpin-pins",JSON.stringify(s.value))},w=()=>{const t=localStorage.getItem("pendingImage"),e=100+s.value.length%5*50,n=100+Math.floor(s.value.length/5)*50;t?(s.value.push({id:Date.now(),image:t,x:e,y:n}),localStorage.removeItem("pendingImage")):s.value.push({id:Date.now(),image:"data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="200" height="150"><rect fill="#21262d" width="200" height="150"/><text fill="#8b949e" x="50%" y="50%" text-anchor="middle" text-anchor="middle">New Pin</text></svg>'),x:e,y:n}),i()},P=t=>{const e=t.target.files[0];if(e){const n=new FileReader;n.onload=a=>{const M=100+s.value.length%5*50,k=100+Math.floor(s.value.length/5)*50;s.value.push({id:Date.now(),image:a.target.result,x:M,y:k}),i()},n.readAsDataURL(e)}},b=t=>{s.value=s.value.filter(e=>e.id!==t),i()},E=()=>{confirm("æ¸…é™¤æ‰€æœ‰ Pin?")&&(s.value=[],i())},I=(t,e)=>{l=t,u={x:e.clientX-(t.x||0),y:e.clientY-(t.y||0)},document.addEventListener("mousemove",g),document.addEventListener("mouseup",v)},g=t=>{l&&(l.x=t.clientX-u.x,l.y=t.clientY-u.y,i())},v=()=>{l=null,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",v)},L=(t,e)=>{d=t,m={x:e.clientX,y:e.clientY};const n=e.target.parentElement.querySelector("img"),a=e.clientX-m.x;n.style.width=Math.max(50,(parseInt(n.style.width)||200)+a)+"px",document.addEventListener("mousemove",p),document.addEventListener("mouseup",x)},p=t=>{if(d&&t.target.parentElement){const e=t.clientX-m.x,n=t.target.parentElement.querySelector("img");n.style.width=Math.max(50,200+e)+"px"}},x=()=>{d=null,document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",x)};return C(_),(t,e)=>(c(),r("div",B,[e[2]||(e[2]=o("h2",null,"ğŸ“Œ Pin æ¿",-1)),o("div",Y,[o("button",{onClick:w},"â• æ·»åŠ  Pin"),o("button",{onClick:E,class:"danger"},"ğŸ—‘ï¸ æ¸…é™¤å…¨éƒ¨"),o("label",F,[e[0]||(e[0]=D(" ğŸ“ ä¸Šä¼ å›¾ç‰‡ ",-1)),o("input",{type:"file",accept:"image/*",onChange:P,hidden:""},null,32)])]),o("div",{class:"pins-container",ref_key:"container",ref:y},[(c(!0),r(X,null,z(s.value,n=>(c(),r("div",{key:n.id,class:"pin",style:R({left:(n.x||100)+"px",top:(n.y||100)+"px"}),onMousedown:a=>I(n,a)},[o("img",{src:n.image,alt:`Pin ${n.id}`,draggable:"false"},null,8,V),o("button",{class:"close",onClick:f(a=>b(n.id),["stop"])},"Ã—",8,q),o("div",{class:"resize-handle",onMousedown:f(a=>L(n,a),["stop"])},null,40,A)],44,O))),128)),s.value.length===0?(c(),r("div",J,[...e[1]||(e[1]=[o("p",null,"è¿˜æ²¡æœ‰ Pin",-1),o("p",{class:"hint"},'æˆªå›¾åç‚¹å‡»"Pinåˆ°å±å¹•"æˆ–ä¸Šä¼ å›¾ç‰‡',-1)])])):N("",!0)],512),e[3]||(e[3]=o("div",{class:"instructions"},[o("p",null,"ğŸ’¡ æç¤ºï¼šæ‹–æ‹½ç§»åŠ¨ä½ç½®ï¼Œå³ä¸‹è§’è°ƒæ•´å¤§å°")],-1))]))}},j=S(U,[["__scopeId","data-v-fccf83b4"]]);export{j as default};
